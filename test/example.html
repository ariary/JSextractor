<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>🚜 A Simple Web Scraper in Go – Gregory Schier</title>
  <meta name="author" content="Gregory Schier">
  <meta name="description" content="In my previous job at Sendwithus, we&#39;d been having trouble writing performant concurrent systems in Python. After many attempts, we came to the conclusion that Python just wasn&#39;t suitable for some of our high throughput tasks, so we started experimenting with Go as a potential replacement.">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
  <link rel="canonical" href="https://schier.co/blog/a-simple-web-scraper-in-go" />

  
    <meta property="article:published_time" content="2015-04-26 00:00:00 +0000 +0000" />
  

  
    <meta property="article:modified_time" content="2021-12-16 12:17:12.93 +0000 +0000" />
    <meta property="og:updated_time" content="2021-12-16 12:17:12.93 +0000 +0000" />
  

  
  <link href="/rss.xml" rel="alternate" type="application/rss+xml" title="Gregory Schier" />
  <link href="/rss.xml" rel="feed" type="application/rss+xml" title="Gregory Schier" />

  
  <link rel="apple-touch-icon" sizes="180x180" href="/static-1638567283/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static-1638567283/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static-1638567283/favicon/favicon-16x16.png">
  <link rel="manifest" href="/static-1638567283/favicon/site.webmanifest">
  <link rel="shortcut icon" href="/static-1638567283/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-config" content="/static-1638567283/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  
  <meta name="twitter:site" content="@GregorySchier" />
  <meta name="twitter:creator" content="@GregorySchier" />
  <meta property="og:url" content="https://schier.co/blog/a-simple-web-scraper-in-go" />
  <meta property="og:title" content="🚜 A Simple Web Scraper in Go" />
  <meta property="og:description" content="In my previous job at Sendwithus, we&#39;d been having trouble writing performant concurrent systems in Python. After many attempts, we came to the conclusion that Python just wasn&#39;t suitable for some of our high throughput tasks, so we started experimenting with Go as a potential replacement." />
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:image" content="https://assets.schier.dev/images/a/1578241887.png" />
  

  
  
    
    <style>:root,[theme=light-auto],[theme=light]{--hue:212;--bg:hsl(var(--hue),10%,100%);--bg-btn:var(--primary-500);--bg-btn-hover:var(--primary-500);--txt-btn:var(--gray-100);--txt-btn-hover:var(--gray-100);--txt-link:hsl(var(--hue),97%,43%);--txt-syntax-1:#805ad5;--txt-syntax-2:#3182ce;--txt-syntax-3:#5a67d8;--txt-syntax-4:#8e9dad;--txt-notice:var(--notice-500);--txt-info:var(--info-500);--txt-warning:var(--warning-500);--txt-danger:var(--danger-500);--txt-selection:rgba(199,226,255,0.99);--gray-100:hsl(var(--hue),80%,98%);--gray-200:hsl(var(--hue),62%,94%);--gray-300:hsl(var(--hue),52%,91%);--gray-400:hsl(var(--hue),42%,84%);--gray-500:hsl(var(--hue),32%,69%);--gray-600:hsl(var(--hue),25%,52%);--gray-700:hsl(var(--hue),20%,42%);--gray-800:hsl(var(--hue),18%,23%);--gray-900:hsl(var(--hue),12%,14%);--danger-100:#fff5f5;--danger-400:#fc8181;--danger-500:#f56565;--warning-100:#fffaf0;--warning-400:#f6ad55;--warning-500:#ed8936;--notice-100:ivory;--notice-400:#ecc94b;--notice-500:#d69e2e;--info-100:#ebf8ff;--info-400:#63b3ed;--info-500:#4299e1;--primary-050:hsla(var(--hue),62%,50%,0.07);--primary-100:hsla(var(--hue),62%,50%,0.33);--primary-200:hsla(var(--hue),62%,50%,0.53);--primary-300:hsla(var(--hue),62%,50%,0.67);--primary-400:hsla(var(--hue),62%,50%,0.87);--primary-500:hsla(var(--hue),62%,50%,1)}[theme=dark-auto],[theme=dark]{--hue:212;--bg:hsl(var(--hue),15%,12%);--bg-btn:var(--primary-400);--bg-btn-hover:var(--primary-500);--txt-btn:var(--gray-800);--txt-btn-hover:var(--gray-900);--txt-link:hsl(var(--hue),100%,68%);--txt-syntax-1:#a985ff;--txt-syntax-2:#57bcff;--txt-syntax-3:#e181e4;--txt-syntax-4:#717884;--txt-notice:var(--notice-500);--txt-info:var(--info-500);--txt-warning:var(--warning-500);--txt-danger:var(--danger-500);--txt-selection:rgba(74,85,104,0.99);--gray-100:hsl(var(--hue),19%,13%);--gray-200:hsl(var(--hue),19%,20%);--gray-300:hsl(var(--hue),19%,27%);--gray-400:hsl(var(--hue),19%,40%);--gray-500:hsl(var(--hue),19%,50%);--gray-600:hsl(var(--hue),19%,57%);--gray-700:hsl(var(--hue),19%,62%);--gray-800:hsl(var(--hue),19%,78%);--gray-900:hsl(var(--hue),19%,90%);--danger-100:rgba(252,129,129,0.07);--danger-400:rgba(252,129,129,0.8);--danger-500:#fc8181;--warning-100:rgba(246,173,85,0.07);--warning-400:rgba(246,173,85,0.8);--warning-500:#f6ad55;--notice-100:rgba(214,158,46,0.07);--notice-400:rgba(214,158,46,0.87);--notice-500:#d69e2e;--info-100:rgba(86,156,207,0.07);--info-400:rgba(86,156,207,0.8);--info-500:#569ccf}.cards{display:flex;flex:1 1 0%;margin-left:-.5rem;margin-right:-.5rem;align-items:stretch}.cards .card{font-size:.875rem;padding-left:.5rem;padding-right:.5rem;width:100%;margin-left:auto;margin-right:auto;display:block}.cards .card__inner{border-width:1px;border-color:var(--gray-200);border-radius:.25rem;padding:.5rem 1rem;margin-top:1rem;background-color:var(--gray-100)}.cards .card__inner>:not(:last-child){margin:0 0 .25rem;padding:0}.cards .card__title{font-size:.75rem;color:var(--gray-700);white-space:nowrap}.cards .card__body--big{font-size:1.875rem;font-weight:200}.cards .card--clicky:active,.cards .card--clicky:hover{cursor:pointer}.cards .card--clicky:hover .card__inner{border-color:var(--primary-300)}.cards--2,.cards--3,.cards--flexy{flex-wrap:wrap}.cards--2 .card{flex-grow:1}.cards--flexy .card{flex-grow:1;width:auto;flex:1 1 auto}@media only screen and (max-width:600px){.cards{flex-wrap:wrap}.cards .card{width:100%}.cards--double-wrap .card{width:50%}.cards .card__body{font-size:1.125rem}.cards .card__body--big{font-size:1.5rem}}.content h1{font-size:1.875rem}.content h2{font-size:1.5rem;padding-top:.5rem}.content h3{font-size:1.25rem}.content ul li{list-style-type:disc;margin-left:1.5rem}.content ol li{list-style-type:decimal;margin-left:1.5rem}.content dl dt{font-weight:700}.content dl dt:after{content:":"}.content>div,.content>dl,.content>h1,.content>h2,.content>h3,.content>h4,.content>h5,.content>h6,.content>header,.content>hr,.content>img,.content>ol,.content>p,.content>pre,.content>ul,.content blockquote,.content canvas,.content details,.content form,.content summary,.content table{margin-top:1.5rem;margin-bottom:1.5rem}.content canvas{display:block;width:100%;border-radius:.125rem;margin-top:2rem;margin-bottom:2rem}.content>p{line-height:1.625}.content p>img{display:block;border-radius:.125rem;margin:2rem auto;max-height:50vh;max-width:100%}.content a{border-bottom:1px;border-style:dashed;border-color:var(--primary-300)}.content a:hover{border-left-color:var(--primary-500);border-bottom:1px var(--primary-500);border-style:solid;border-right-color:var(--primary-500);border-top-color:var(--primary-500);text-decoration:none}.content .footnotes{font-size:.875rem;opacity:.8;margin-top:2.5rem;margin-bottom:2.5rem;font-style:italic}.content .footnotes li{margin-left:1.25rem}.content .footnotes hr{display:none}.content :not(pre) code{background-color:var(--gray-200);border-radius:.25rem;padding-left:.25rem;padding-right:.25rem;border-width:2px;border-color:var(--gray-200);font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:.8em}.content table{width:100%}.content table th{text-align:left}.content table td,.content table th{border-width:1px;border-color:var(--gray-300);padding:.25rem .5rem}.content table thead tr{background-color:var(--gray-200)}.content blockquote{border-left-width:4px;border-color:var(--gray-300);padding:.75rem;background-color:var(--gray-100);font-style:italic;color:var(--gray-700);border-radius:.125rem}.content h1[id] .h-link,.content h2[id] .h-link,.content h3[id] .h-link,.content h4[id] .h-link,.content h5[id] .h-link,.content h6[id] .h-link{position:absolute;padding-left:2rem;padding-right:.5rem;visibility:hidden;right:100%;color:inherit}.content h1[id] .h-link svg,.content h2[id] .h-link svg,.content h3[id] .h-link svg,.content h4[id] .h-link svg,.content h5[id] .h-link svg,.content h6[id] .h-link svg{height:1rem;opacity:.5}.content h1[id] .h-link:hover svg,.content h2[id] .h-link:hover svg,.content h3[id] .h-link:hover svg,.content h4[id] .h-link:hover svg,.content h5[id] .h-link:hover svg,.content h6[id] .h-link:hover svg{opacity:1}.content h1[id]:hover .h-link,.content h2[id]:hover .h-link,.content h3[id]:hover .h-link,.content h4[id]:hover .h-link,.content h5[id]:hover .h-link,.content h6[id]:hover .h-link{visibility:visible}.bottom-footer{background-color:var(--gray-100);padding-top:8rem;padding-bottom:8rem;margin-top:6rem;border-top-width:1px;border-color:var(--gray-200)}.bottom-footer .links{text-align:center;padding-top:2rem;font-size:.875rem;color:var(--gray-700)}.bottom-footer .links p{margin-top:.5rem;margin-bottom:0}.bottom-footer svg{margin-left:auto;margin-right:auto;display:block;width:7rem}.bottom-footer a i{color:var(--txt-link);text-decoration:none}.notice{font-size:.875rem;padding:.75rem 1rem;border-radius:.25rem;border:1px dotted var(--gray-400);background-color:var(--gray-100);color:var(--gray-700);text-align:center}.notice a{color:inherit}.notice a:not(.btn){text-decoration:underline}.notice a:hover{color:var(--gray-700)}.notice>code{background-color:var(--bg)!important;border-color:var(--bg)!important}.notice--big{padding-top:1rem;padding-bottom:1rem;font-size:1rem;border-width:2px;font-weight:500}.notice--huge{padding-top:1.5rem;padding-bottom:1.5rem;font-size:1.25rem;border-width:4px;font-weight:700}.notice--danger{border-color:var(--danger-400);background-color:var(--danger-100);color:var(--txt-danger)}.notice--warning{border-color:var(--warning-400);background-color:var(--warning-100);color:var(--txt-warning)}.notice--notice{border-color:var(--notice-400);background-color:var(--notice-100);color:var(--txt-notice)}.notice--info{border-color:var(--info-400);background-color:var(--info-100);color:var(--txt-info)}.subscription-form-wrapper{border-width:1px;border-color:var(--primary-100);background-color:var(--primary-050);border-radius:.25rem;margin-top:2.5rem;position:relative}.subscription-form-wrapper p{margin-bottom:1rem}.subscription-form-wrapper input{border-color:var(--primary-200)}.subscription-form-wrapper form{max-width:24rem}.subscription-form{margin-left:auto;margin-right:auto;margin-top:0}.subscription-form__inner{text-align:center;margin-left:auto;margin-right:auto;padding:2.5rem 1rem}.subscription-form__hide{padding:.25rem .75rem;opacity:.5;color:var(--txt-link);right:0;top:0;position:absolute}.subscription-form__hide:hover{opacity:1;text-decoration:none}.subscription-form input[name=username]{position:absolute;left:-100000px;top:-100000px}pre.chroma{position:relative;display:block;background-color:var(--gray-100);padding:1.5rem;overflow:auto;border-radius:.25rem;font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;border-width:1px;border-color:var(--gray-200);overflow-x:auto;cursor:text;-moz-tab-size:4;tab-size:4;font-size:.8em}pre.chroma .c,pre.chroma .c1,pre.chroma .cm{font-style:italic;color:var(--txt-syntax-4)}pre.chroma .s,pre.chroma .s1,pre.chroma .s2,pre.chroma .sb{color:var(--txt-syntax-1)}pre.chroma .n,pre.chroma .nb,pre.chroma .nt{color:var(--gray-500);color:var(--txt-syntax-2)}pre.chroma .k,pre.chroma .kd{color:var(--txt-syntax-3)}pre.chroma .m,pre.chroma .mi{color:var(--txt-syntax-1)}.btn{background-color:var(--bg-btn);color:var(--txt-btn);font-weight:600;padding:.5rem 1rem;font-size:.875rem;border-radius:.25rem;width:auto;display:inline-block;cursor:pointer;border-width:0!important}.btn svg{height:1rem;width:auto}.btn path{fill:currentColor}.btn:hover:not(:disabled){background-color:var(--bg-btn-hover);color:var(--txt-btn-hover);text-decoration:none}.btn.btn--faint{background-color:var(--gray-200);color:var(--gray-400);margin-left:auto;padding:.25rem .75rem;font-size:1.125rem}.btn.btn--faint:hover:not(:disabled){background-color:var(--gray-300);color:var(--gray-500)}.btn.btn--gray{background-color:var(--gray-200);color:var(--gray-700)}.btn.btn--gray:hover:not(:disabled){background-color:var(--gray-300);color:var(--gray-800)}.btn.btn--email,.btn.btn--hn,.btn.btn--reddit,.btn.btn--twitter{text-shadow:0 0 .2em rgba(0,0,0,.2);color:#fff}.btn.btn--email:hover,.btn.btn--hn:hover,.btn.btn--reddit:hover,.btn.btn--twitter:hover{box-shadow:inset 0 0 100px rgba(0,0,0,.1);color:#fff!important}.btn.btn--twitter{background-color:#55acee!important}.btn.btn--hn{background-color:#f60!important}.btn.btn--reddit{background-color:#ff5700!important}.btn.btn--email{background-color:#555!important}.btn.btn--sm{padding:.25rem .75rem}.btn.btn--sm,.btn.btn--xs{font-size:.75rem;border-radius:.125rem}.btn.btn--xs{padding-left:.75rem;padding-right:.75rem;font-weight:400;padding-top:.1em;padding-bottom:.1em}.btn:disabled{opacity:.5;cursor:default}.top-nav{margin-bottom:2.5rem;font-size:.875rem;border-bottom-width:1px;border-color:var(--gray-200)}.top-nav .container{max-width:70rem}.top-nav .container,.top-nav ul{display:flex;flex-direction:row;align-items:center}.top-nav ul{list-style-type:none}.top-nav ul:first-child{margin-right:auto}.top-nav a{color:var(--gray-700);height:100%;display:block}.top-nav a:hover{color:var(--gray-900)}.top-nav a.logo svg{height:2rem;width:2rem;overflow:visible;margin-top:.75rem;margin-bottom:.75rem}.top-nav a svg{height:1rem;width:1rem;fill:currentColor;float:left}.top-nav li{margin-left:1.5rem}.top-nav li:first-child{margin-left:0;margin-right:auto}*,:after,:before{box-sizing:border-box;border:0 solid var(--gray-300);padding:0;margin:0;background-color:initial;font-size:100%;border-collapse:collapse;line-height:inherit;font-weight:400}::selection{background-color:var(--txt-selection)}html{background-color:var(--bg);color:var(--gray-800);font-size:18px;line-height:1.5;font-family:Helvetica,Lato,Open Sans,sans-serif}main{margin-left:auto;margin-right:auto;min-height:30vh}strong,strong *{font-weight:700}.container{margin-left:auto;margin-right:auto;padding-left:2rem;padding-right:2rem;max-width:40rem}.link{-webkit-appearance:initial}a{color:var(--txt-link);text-decoration:none}h1 a:not(:hover),h2 a:not(:hover),h3 a:not(:hover),h4 a:not(:hover),h5 a:not(:hover),h6 a:not(:hover){border-color:transparent!important}hr{border-color:var(--gray-200);border-width:0 0 1px;margin-top:2rem;margin-bottom:2rem}small{font-size:.875rem}h1,h2,h3,h4,h5,h6{font-weight:600;color:var(--gray-800);position:relative}h1{font-size:1.875rem;color:var(--gray-900)}h2{font-size:1.25rem;color:var(--gray-800)}.form-wrapper{margin-left:auto;margin-right:auto;max-width:24rem}.form-wrapper form{margin-top:1.5rem;margin-bottom:1.5rem}.form-row{margin-bottom:1.5rem;box-sizing:border-box}.form-actions{display:flex;align-items:center;justify-content:space-between}.form-actions>:last-child{margin-left:auto}form label{display:block;color:var(--gray-700);font-size:.875rem;font-weight:700;margin-bottom:.5rem}form .checkbox-buttons{display:flex;-webkit-user-select:none;user-select:none;width:100%;flex-wrap:wrap}form .checkbox-buttons .checkbox-buttons__button{display:flex;display:inline-block;margin-right:.5rem;margin-bottom:.25rem}form .checkbox-buttons .checkbox-buttons__button label{margin:0;padding:.25rem .75rem;border-radius:.25rem;background-color:var(--gray-200);font-size:.75rem;cursor:pointer;color:var(--gray-700);white-space:nowrap}form .checkbox-buttons .checkbox-buttons__button label:hover{background-color:var(--gray-200);color:var(--gray-700)}form .checkbox-buttons .checkbox-buttons__button input:checked+label{background-color:var(--bg-btn);color:var(--txt-btn)}form .checkbox-buttons .checkbox-buttons__button input:checked+label:hover{background-color:var(--bg-btn-hover);color:var(--txt-btn-hover)}form .checkbox-buttons .checkbox-buttons__button input{display:none}#editor-container .CodeMirror,form input,form select,form textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--gray-100);border-width:1px;border-color:var(--gray-400);border-radius:.25rem;width:100%;padding:.5rem .75rem;color:var(--gray-700);line-height:1.25}#editor-container .CodeMirror-cursor{border-color:var(--gray-700)}.CodeMirror-placeholder,input::placeholder,textarea::placeholder{color:var(--gray-500)}.CodeMirror-focused,form input:focus,form select:focus{background-color:var(--bg);outline:0;border-width:1px;border-color:var(--primary-400)}form input:invalid,form select:invalid,form textarea:invalid{border-color:var(--danger-500)}details summary{cursor:pointer}details summary:focus{outline:0}.blog-post{margin-bottom:2.5rem}.blog-post>header{padding-bottom:1rem}.blog-post-preview{margin-top:3rem;padding-bottom:1.5rem;border-bottom-width:1px;border-color:var(--gray-200)}.blog-post-continue{display:flex;flex-wrap:wrap}.blog-post-continue>a:last-child{margin-left:auto;font-size:.875rem}.blog-post-continue>a:last-child:not(:hover){border-color:transparent}.blog-post-preview img{display:none}.meta{display:block;font-size:.875rem;color:var(--gray-700);font-weight:400}.blog-post-preview h2{margin-bottom:1rem;font-size:1.5rem}.blog-post-preview h2 a:not(:hover){color:inherit}.blog-post hr{border:double var(--gray-300);border-width:0 0 4px;margin:2rem auto;width:5em}.pagination{margin-top:2.5rem;display:flex;justify-content:space-between}.pagination-center{text-align:center;width:100%}.pagination-left{width:6rem;text-align:left;white-space:nowrap}.pagination-right{width:6rem;text-align:center}.button-input{display:flex}.button-input label{visibility:hidden;position:absolute}.button-input input{border-top-right-radius:0;border-bottom-right-radius:0}.button-input input,.button-input input:focus{border-right-width:0}.button-input .btn{width:auto;text-align:center;font-size:.75rem;border-top-left-radius:0;border-bottom-left-radius:0}.all-tags{display:flex;flex-wrap:wrap;justify-content:space-between}.all-tags .tag,.tag{margin-top:.5rem}.tag{margin-right:.5rem;border-radius:9999px;border:1px solid var(--primary-400);text-transform:uppercase;display:inline-block;border-style:solid!important;font-size:.7em;padding:0 .6em}.tag:hover{background-color:var(--primary-050)}.project{margin-top:2.5rem}.project img{height:1.5rem;border-radius:.125rem;margin-right:.5rem}.project h3{font-size:1.25rem}.project p{margin-top:.25rem;margin-bottom:.25rem}.project h3>a,.project h3>span{display:inline-flex}.project small{font-size:.875rem;color:var(--gray-700);font-style:italic}.home-hero{display:flex;align-items:center;justify-content:space-between;margin-top:1.5rem}.home-hero__avatar{padding-right:2rem;margin-top:1.5rem}.home-hero__avatar img{border-radius:9999px;display:block;margin-left:auto;margin-right:auto;max-width:100%;width:18rem}.clap-button{display:flex;align-items:center;font-size:.875rem;color:var(--gray-600);margin-right:1rem}.clap-button button{border-radius:9999px;border-width:1px;border-color:var(--gray-600);margin-right:.75rem;outline:0!important;width:3rem;height:3rem;transition:transform .1s}.clap-button button:disabled{opacity:.5;cursor:default}.clap-button button:not(:disabled):hover{border-color:var(--gray-800)}.clap-button button:not(:disabled):active{transform:scale(1.1)}.clap-button button:not(:disabled):hover svg path{fill:currentColor;color:var(--gray-900)}.clap-button button svg{padding:17%}.clap-button button svg path{fill:currentColor;color:var(--gray-700)}.vote-messages>*{font-size:.875rem;margin-top:1.5rem}.blog-post__btns{display:flex;flex-direction:row;margin:.5rem auto;justify-content:center}.blog-post__btns .btn{margin-left:.25rem;margin-right:.25rem}.svg-icon{display:flex;align-items:center;opacity:1}.svg-icon:hover{opacity:.9}.svg-icon svg{height:.75rem;margin-right:.25rem;display:inline-block}.row-spaced{display:flex;justify-content:space-between;align-items:center}.hr--spaced{margin-top:3rem;margin-bottom:3rem}.inline-form{display:inline}@keyframes shake{0%{transform:translate(1px,1px) rotate(0deg)}10%{transform:translate(-2px,-1px) rotate(-.5deg)}20%{transform:translate(-2px) rotate(.5deg)}30%{transform:translate(2px,3px) rotate(0deg)}40%{transform:translate(1px,-1px) rotate(.5deg)}50%{transform:translate(-1px,1px) rotate(-.5deg)}60%{transform:translate(-2px,1px) rotate(0deg)}70%{transform:translate(3px,1px) rotate(-.5deg)}80%{transform:translate(-1px,-1px) rotate(.5deg)}90%{transform:translate(1px,1px) rotate(0deg)}to{transform:translate(1px,-3px) rotate(-.5deg)}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes flip{0%{transform:rotate(0deg)}to{transform:rotate(180deg)}}@media only screen and (max-width:600px){html{font-size:16px}.container{padding-left:1rem;padding-right:1rem}.h-link,.hidden-mobile{display:none}.home-hero{flex-wrap:wrap}.home-hero__avatar{margin-left:auto;margin-right:auto;width:auto;max-width:12rem}}</style>
  

  

  
    <script async defer data-website-id="8988d628-d14d-421a-b4bd-390381c601ad" src="https://umami-analytics-production.up.railway.app/umami.js"></script>
    <script src="https://analytics-production.up.railway.app/script.js" data-website="site_RPutoRaXSMBFj6hyzV"></script>
  
</head>
<body data-deployed="2021-12-03T21:34:43Z" data-csrf-token="AlKNcVn02u5dtTyBTU8IelxkBWSl9RYxNbpPAkKD5lDLF4jYLQkLOt31wqnD9RX+2aB1cpBXN1H4KZKBEfP/Mw==" data-csrf-Token-header="X-CSRF-Token" data-logged-in="no">


<script>
  (function() {
    const theme = localStorage.getItem('theme') || '';
    if (theme) {
      document.querySelector('html').setAttribute('theme', theme);
    } else {
      const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const autoTheme = preferDark ? 'dark-auto' : 'light-auto';
      document.querySelector('html').setAttribute('theme', autoTheme);
    }
  })();
</script>


  <nav class="top-nav">
  <div class="container">
    <ul>
      <li>
        <a href="/" class="logo" title="home">
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 748 748">
    <clipPath id="A">
        <circle cx="374" cy="374" r="374"/>
    </clipPath>
    <g clip-path="url(#A)">
        <path d="M-.603 373.897h748.356v374.5H-.603z" fill="#524b46"/>
        <path d="M-.603 427.853L149.45 410.62l340.367 24.513 167.434-34h90.503V126.837H-.603v301.016z"
              fill="#625a54"/>
        <path d="M-.603-.603V210.7H116.68l112.302-29.746 279.933-10.64 141.6 10.64 97.23-31.642V-.603H-.603z"
              fill="#746b64"/>
        <path d="M250.906 561.984l218.712-78.662s9.937.987 14.67 2.466c5.627 1.758 19.095 8.083 19.095 8.083l-19.095 115.48-99.83 100.453-115.43-77.16-18.122-70.66z"
              fill="#423f3d"/>
        <path d="M265.81 433.212s-62.025 78.665 20.455 152.545c24.158 21.64 75.707 49.576 92.467 49.46 31.476-.217 69.45-32.395 69.45-32.395s35.694-81.308 35.694-90.945c0-15.396-21.156-29.682-22.056-34.547-2.123-11.487-.7-60.254-.7-60.254l-195.31 16.136z"
              fill="#d2b4aa"/>
        <path d="M448.028 617.132l.018-21.17s36.36-97.123 50.33-106.205c5.06-3.3 13.406-5.865 15.284-9.697s.52-12.384-4.017-13.298c-9.874-2-48.704 0-48.704 0l-3.272-43.652 42.507 14.5 69.445 19.132-21.724 42.097s93.13 27.307 141.642 74.586c9.63 9.384 58.218 174.98 58.218 174.98H-.603s48.82-162.398 58.31-168.974c10.195-7.062 105.116-60.16 143.625-62.632 0 0 40.232-83.587 60.945-73.033 17.8 9.07-36.34 82.38 21.8 159.307l112.58 86.995 51.37-72.936z"
              fill="#4992ea"/>
        <path d="M417.772 748.397h-57.736s3.817-32.114 10.894-46.3c7.05-15.896 61.8-72.364 75.16-87.02 17.052-20.643 43.2-55.592 60.313-78.84 14.63-19.864 34.5-48.127 42.43-60.646 2.74-4.324 7.035-10.068 5.157-14.468s-10.47-10.455-16.423-11.93-13.048 4.925-19.297 3.085c-7.958-2.344-28.454-17.147-28.454-17.147 8.376-17.07 116.872-7.966 93.865 43.78-.748 6.268-9.817 10.48-8.88 16.722 1.118 7.45 17.54 13.443 15.584 27.978-1.112 8.27-41.726 35.133-49.6 42.887-9.5 9.358-52.943 54.937-60.808 64.234-6.85 8.096-42.807 52.612-50.145 67.873-7.328 15.245-12.07 49.793-12.07 49.793zm-151.375-306.36s-32.975 28.577-42.56 40.462c-7.172 8.893-13.28 21.348-14.948 30.848-12.65 29.14 78.875 98.73 115.266 120.642 12.705 7.65 29.9 17.4 37.712 24.096 4.683 4.015 9.16 16.087 9.16 16.087-.678 9.77-14.737 21.02-23.124 23.47-10.647 3.113-27.505 7.416-39.806 2.375-14.673-6.014-32.977-25.55-48.232-38.456-10.363-5.634-27.81-22.406-43.527-40.15-85.708-72.79-34.292-173.967 49.303-190.76l.755 11.382.001.003z"
              fill="#98c5ff"/>
        <path d="M302.343 654.642c-3.368-1.174-5.788-4.382-5.788-8.152 0-4.762 3.863-8.63 8.62-8.63s8.622 3.867 8.622 8.63c.003 1.813-.568 3.58-1.63 5.05 7.087 26.966 4.783 63.317 5.3 96.86h-10.282c.46-2.056 4.16-81.32-4.83-93.754v-.002zm144.07-6.896c-1.8-1.582-2.92-3.896-2.92-6.472 0-4.762 3.863-8.63 8.62-8.63s8.622 3.867 8.622 8.63a8.63 8.63 0 0 1-4.06 7.323c-4.562 24.24-6.477 99.8-6.477 99.8l-10.28-.864c1.483-48.83 3.745-73.606 6.498-99.788l-.003.001z"
              fill="#423f3d"/>
        <path d="M376.1 76.938c-112.268-6.826-152.306 155.097-158.044 179.405-5.26 22.272-4.057 60.616 0 75.96 6.71 25.38 20.026 27.553 23.36 34.72 3.87 8.325 2.478 22.828 5.376 34.338 4.167 14.8 15.955 35.693 25.756 52.562 10.42 17.933 19.5 44.295 36.767 55.04s46.107 17.594 66.786 9.427c53.872-21.277 99.2-117.03 103.57-141.673 1.722-9.713 17.928-12.693 23.1-21.73s5.3-21.674 7.977-32.5c3.267-13.17 14.967-30.9 11.624-46.522-4.914-22.974-42.71-192.73-146.28-199.027z"
              fill="#e9ccc2"/>
        <path d="M233.655 268.66c-5.3-6.272-14.51-12.236-17.82-22.862-3.702-11.89-2.56-32.067-1.982-48.106.595-16.524 3.312-76.306 13.552-92.64C246.76 75.388 300.74 50.656 358.02 43.256c20.19-2.608 72.903 2.094 114.108 46.915 37.55 51.23 48.915 142.353 45.587 155.226-2.268 8.772-17.93 34.862-24.78 35.67-8.184-69.482-27.38-113.974-37.635-128.045-44.146-14.498-98.26 23.9-137.76 31.214-23.596 7.196-59.4 7.37-72.374 15.442-2.214 6.32-3.292 78.723-11.5 68.983z"
              fill="#fff8d4"/>
    </g>
</svg>

        </a>
      </li>
<!--      <li>-->
<!--        <a href="/books">Books</a>-->
<!--      </li>-->
      <li>
        <a href="/projects">Projects</a>
      </li>
      <li>
        <a href="/blog/page/1">Blog</a>
      </li>
    </ul>
    <ul>
      <li data-toggle-theme style="font-size:0">
        <a href="#" title="Automatic theme" data-theme="auto">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
     class="svg-inline--fa fa-adjust fa-w-16 fa-2x">
    <path fill="currentColor"
          d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"></path>
</svg>

        </a>
        <a href="#" title="Light theme" data-theme="light" style="display:none">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path>
</svg>

        </a>
        <a href="#" title="Dark theme" data-theme="dark" style="display:none">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path>
</svg>

        </a>
      </li>
      <li class="hidden-mobile">
        <a href="//twitter.com/GregorySchier" rel="noopener" title="Twitter">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor"
          d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
</svg>

        </a>
      </li>
      <li class="hidden-mobile">
        <a href="/blog/search" title="search">
          <svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.618,13.274c1.593,0 3.097,-0.564 4.294,-1.591l5.82,5.835c0.108,0.108 0.25,0.162 0.391,0.162c0.141,0 0.282,-0.054 0.39,-0.161c0.216,-0.216 0.217,-0.565 0.001,-0.781l-5.825,-5.839c2.181,-2.604 2.053,-6.504 -0.389,-8.953c-1.25,-1.255 -2.913,-1.946 -4.682,-1.946c-1.769,0 -3.432,0.691 -4.682,1.945c-2.581,2.587 -2.581,6.797 0,9.385c1.25,1.254 2.913,1.944 4.682,1.944Zm-3.9,-10.549c1.042,-1.045 2.427,-1.62 3.9,-1.62c1.473,0 2.858,0.575 3.9,1.62c2.152,2.157 2.152,5.667 0,7.824c-1.042,1.045 -2.427,1.62 -3.9,1.62c-1.473,0 -2.858,-0.575 -3.9,-1.62c-2.152,-2.157 -2.152,-5.667 0,-7.824Z"/>
</svg>

        </a>
      </li>
    </ul>
  </div>
</nav>

  <main>
    
  <div class="container blog-post-container">
    <article class="content blog-post">
  <header>
    <h1>🚜 A Simple Web Scraper in Go</h1>
    <div class="meta ">
  <time datetime="2015-04-26 00:00:00 +0000 +0000" title="2015-04-26 00:00:00 +0000 +0000">
    Apr 26, 2015
  </time>
  <span title="1599 words">
    &bull; 8 min read
  </span>
  
  
    <span title="51 readers voted">
      &bull; 466 votes
      
    </span>
  
  
  
  
</div>

  </header>

  

  

  

  <p>In my previous job at <a href="https://www.sendwithus.com">Sendwithus</a>, we&rsquo;d been having trouble writing performant concurrent systems in Python. After many attempts, we came to the conclusion that Python just wasn&rsquo;t suitable for some of our high throughput tasks, so we started experimenting with <a href="https://golang.org/">Go</a> as a potential replacement.</p>

<!--more-->

<p>After making it all the way through the <a href="https://tour.golang.org">Golang Interactive Tour</a>, which I highly recommend doing so if you haven&rsquo;t already, I wanted to build something <em>real</em>. The last task in the Go tour is to build a concurrent web crawler, but it faked the fun
parts like making HTTP requests and parsing HTML. It was this that motivated me to open my IDE and try it myself. This post will walk you through the steps I tool to build a simple web scraper in Go.</p>

<p>We&rsquo;ll go over three main topics:</p>

<ol>
<li>using the <code>net/http</code> package to fetch a web page</li>
<li>using the <code>golang.org/x/net/html</code> to parse an HTML document</li>
<li>using Go concurrency with multi-channel communication</li>
</ol>

<p>In order to keep this tutorial short, I won&rsquo;t be
accommodating those of you that haven&rsquo;t yet finished the
<a href="https://tour.golang.org">Go Tour</a>. The tour will teach you everything you need to know to follow along.</p>

<h2 id="building-a-web-scraper-190">Building a Web Scraper</h2>

<p>As I mentioned in the introduction, we&rsquo;ll be building a simple web scraper in Go. Note that I didn&rsquo;t say <em>web crawler</em> because our scraper will only be going one level deep (maybe I&rsquo;ll cover crawling in another post).</p>

<p>We&rsquo;re going to be building a basic command line tool that takes an input of seed URLs, scrapes them, then prints the links it finds on those pages.</p>

<p>Here&rsquo;s an example of it in action:</p>
<pre class="chroma">$ go run main.go https://schier.co https://insomnia.rest

Found 7 unique urls:

 - https://insomnia.rest
 - https://twitter.com/GregorySchier
 - https://support.insomnia.rest
 - https://chat.insomnia.rest
 - https://github.com/Kong/insomnia
 - https://twitter.com/GetInsomnia
 - https://konghq.com

</pre>
<p>Now that we know what we&rsquo;re building, let&rsquo;s get to the fun part&mdash;putting it together.</p>

<p>To make this tutorial easier to digest, I&rsquo;ll be breaking it down isolated components. After going over each component, I&rsquo;ll put them all together to form the final product. The first component we&rsquo;ll be going over is making an HTTP request to fetch some HTML.</p>

<h3 id="1-fetching-a-web-page-by-url-190">1. Fetching a Web Page By URL</h3>

<p>Go includes a really good HTTP library out of the box. The <a href="https://golang.org/pkg/net/http/">http</a> package provides a <code>http.Get(url)</code> method that only requires a few lines of code.</p>

<p><em>Note that things like error handling are omitted to keep this example short.</em></p>
<pre class="chroma"><span class="c1">//~~~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span><span class="c1">// Make an HTTP request //
</span><span class="c1"></span><span class="c1">//~~~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span>
<span class="nx">resp</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="nx">bytes</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;HTML:\n\n&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">bytes</span><span class="p">)</span><span class="p">)</span>

<span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">(</span><span class="p">)</span>
</pre>
<p>Making an HTTP request is the foundation of a web scraper so now that we know how to do that, we can move on to handling the HTML contents returned.</p>

<h3 id="2-finding-a-tags-in-html-190">2. Finding <code>&lt;a&gt;</code> Tags in HTML</h3>

<p>Go doesn&rsquo;t have a core package for parsing HTML but there is on included in the <a href="https://code.google.com/p/go-wiki/wiki/SubRepositories">Golang SubRepositores</a> that we can imported from <code>golang.org/x/net/html</code>.</p>

<p>If you&rsquo;ve never interacted with an XML or HTML tokenizer before, this may take some time to grasp but I believe in you.</p>

<p>The module&rsquo;s tokenizer splits the HTML document into &ldquo;tokens&rdquo; that can be iterated over. So, to find anchor tags (link) we can tokenize the HTML and iterate over the tokens to find the <code>&lt;a&gt;</code> tags. Here are the possible things that a token can represent (<a href="https://godoc.org/golang.org/x/net/html#TokenType">documentation</a>):</p>

<table>
<thead>
<tr>
<th align="left">Token Name</th>
<th align="left">Token Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>ErrorToken</code></td>
<td align="left">error during tokenization (or end of document)</td>
</tr>

<tr>
<td align="left"><code>TextToken</code></td>
<td align="left">text node (contents of an element)</td>
</tr>

<tr>
<td align="left"><code>StartTagToken</code></td>
<td align="left">example <code>&lt;a&gt;</code></td>
</tr>

<tr>
<td align="left"><code>EndTagToken</code></td>
<td align="left">example <code>&lt;/a&gt;</code></td>
</tr>

<tr>
<td align="left"><code>SelfClosingTagToken</code></td>
<td align="left">example <code>&lt;br/&gt;</code></td>
</tr>

<tr>
<td align="left"><code>CommentToken</code></td>
<td align="left">example <code>&lt;!-- Hello World --&gt;</code></td>
</tr>

<tr>
<td align="left"><code>DoctypeToken</code></td>
<td align="left">example <code>&lt;!DOCTYPE html&gt;</code></td>
</tr>
</tbody>
</table>
<p>The code below demonstrates how to find all the opening anchor tags in an HTML document.</p>
<pre class="chroma"><span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span><span class="c1">// Parse HTML for Anchor Tags //
</span><span class="c1"></span><span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span>
<span class="nx">z</span> <span class="o">:=</span> <span class="nx">html</span><span class="p">.</span><span class="nf">NewTokenizer</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>

<span class="k">for</span> <span class="p">{</span>
    <span class="nx">tt</span> <span class="o">:=</span> <span class="nx">z</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="p">)</span>

    <span class="k">switch</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">tt</span> <span class="o">==</span> <span class="nx">html</span><span class="p">.</span><span class="nx">ErrorToken</span><span class="p">:</span>
    	<span class="c1">// End of the document, we&#39;re done
</span><span class="c1"></span>        <span class="k">return</span>
    <span class="k">case</span> <span class="nx">tt</span> <span class="o">==</span> <span class="nx">html</span><span class="p">.</span><span class="nx">StartTagToken</span><span class="p">:</span>
        <span class="nx">t</span> <span class="o">:=</span> <span class="nx">z</span><span class="p">.</span><span class="nf">Token</span><span class="p">(</span><span class="p">)</span>

        <span class="nx">isAnchor</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Data</span> <span class="o">==</span> <span class="s">&#34;a&#34;</span>
        <span class="k">if</span> <span class="nx">isAnchor</span> <span class="p">{</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;We found a link!&#34;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>Now that we have found the anchor tags, how do we get the <code>href</code> value? Unfortunately, it&rsquo;s not as easy as you would expect. A token stores it&rsquo;s attributes in an array, so have to perform a similar iteration technique.</p>
<pre class="chroma"><span class="c1">//~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span><span class="c1">// Find Tag Attribute //
</span><span class="c1"></span><span class="c1">//~~~~~~~~~~~~~~~~~~~~//
</span><span class="c1"></span>
<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">a</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Attr</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Key</span> <span class="o">==</span> <span class="s">&#34;href&#34;</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Found href:&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Val</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>At this point we know how to fetch HTML using an HTTP request, as well as extract the links from that HTML document. Now let&rsquo;s put it all together.</p>

<h3 id="3-introduce-goroutines-and-channels-190">3. Introduce Goroutines and Channels</h3>

<p>In order to make our scraper performant, and to make this tutorial a bit more advanced, we&rsquo;ll make use of goroutines and channels, Go&rsquo;s utilities for executing concurrent tasks.</p>

<p>The trickiest part of this scraper is how it uses channels. In order for the scraper to run quickly, it needs to fetch all URLs
concurrently. When concurrency is applied, total execution time should equal the time taken to fetch the slowest request. Without concurrency, execution time would equal the sum of all request times since it would be executing them one after the other. So how do we do this?</p>

<p>The approach I took is to <strong>create a goroutine for each request</strong> and have each one publish the URLs it finds to a shared channel. There&rsquo;s one problem with this though. How do we know when the last URL is sent to the channel so we can close it? For this, we can use a second channel for communicating status.</p>

<p>The second channel is simply a notification channel. After a goroutine has published all of it&rsquo;s URLs into the main channel, it will <strong>publish a <em>done</em> message to the notification channel</strong>. Then, main thread can subscribe to the notification channel and stop execution after all goroutines have notified that they are finished. Don&rsquo;t worry, This will make much more sense when you see the finished code.</p>

<h2 id="putting-it-all-together-190">Putting it All Together</h2>

<p>If you&rsquo;ve made it this far, you should know everything necessary to understand the full program, so here it is. I&rsquo;ve also added a few comments to help explain some of the more complicated parts.</p>
<pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;golang.org/x/net/html&#34;</span>
	<span class="s">&#34;net/http&#34;</span>
	<span class="s">&#34;os&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="c1">// Helper function to pull the href attribute from a Token
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">getHref</span><span class="p">(</span><span class="nx">t</span> <span class="nx">html</span><span class="p">.</span><span class="nx">Token</span><span class="p">)</span> <span class="p">(</span><span class="nx">ok</span> <span class="kt">bool</span><span class="p">,</span> <span class="nx">href</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// Iterate over token attributes until we find an &#34;href&#34;
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">a</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Attr</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Key</span> <span class="o">==</span> <span class="s">&#34;href&#34;</span> <span class="p">{</span>
			<span class="nx">href</span> <span class="p">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Val</span>
			<span class="nx">ok</span> <span class="p">=</span> <span class="kc">true</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
	<span class="c1">// &#34;bare&#34; return will return the variables (ok, href) as 
</span><span class="c1"></span>    <span class="c1">// defined in the function definition
</span><span class="c1"></span>	<span class="k">return</span>
<span class="p">}</span>

<span class="c1">// Extract all http** links from a given webpage
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">crawl</span><span class="p">(</span><span class="nx">url</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">ch</span> <span class="kd">chan</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">chFinished</span> <span class="kd">chan</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>

	<span class="k">defer</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// Notify that we&#39;re done after this function
</span><span class="c1"></span>		<span class="nx">chFinished</span> <span class="o">&lt;-</span> <span class="kc">true</span>
	<span class="p">}</span><span class="p">(</span><span class="p">)</span>

	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ERROR: Failed to crawl:&#34;</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">b</span> <span class="o">:=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span>
	<span class="k">defer</span> <span class="nx">b</span><span class="p">.</span><span class="nf">Close</span><span class="p">(</span><span class="p">)</span> <span class="c1">// close Body when the function completes
</span><span class="c1"></span>
	<span class="nx">z</span> <span class="o">:=</span> <span class="nx">html</span><span class="p">.</span><span class="nf">NewTokenizer</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>

	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">tt</span> <span class="o">:=</span> <span class="nx">z</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="p">)</span>

		<span class="k">switch</span> <span class="p">{</span>
		<span class="k">case</span> <span class="nx">tt</span> <span class="o">==</span> <span class="nx">html</span><span class="p">.</span><span class="nx">ErrorToken</span><span class="p">:</span>
			<span class="c1">// End of the document, we&#39;re done
</span><span class="c1"></span>			<span class="k">return</span>
		<span class="k">case</span> <span class="nx">tt</span> <span class="o">==</span> <span class="nx">html</span><span class="p">.</span><span class="nx">StartTagToken</span><span class="p">:</span>
			<span class="nx">t</span> <span class="o">:=</span> <span class="nx">z</span><span class="p">.</span><span class="nf">Token</span><span class="p">(</span><span class="p">)</span>

			<span class="c1">// Check if the token is an &lt;a&gt; tag
</span><span class="c1"></span>			<span class="nx">isAnchor</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Data</span> <span class="o">==</span> <span class="s">&#34;a&#34;</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">isAnchor</span> <span class="p">{</span>
				<span class="k">continue</span>
			<span class="p">}</span>

			<span class="c1">// Extract the href value, if there is one
</span><span class="c1"></span>			<span class="nx">ok</span><span class="p">,</span> <span class="nx">url</span> <span class="o">:=</span> <span class="nf">getHref</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
				<span class="k">continue</span>
			<span class="p">}</span>

			<span class="c1">// Make sure the url begines in http**
</span><span class="c1"></span>			<span class="nx">hasProto</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="s">&#34;http&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
			<span class="k">if</span> <span class="nx">hasProto</span> <span class="p">{</span>
				<span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">url</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">foundUrls</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">bool</span><span class="p">)</span>
	<span class="nx">seedUrls</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="p">]</span>

	<span class="c1">// Channels
</span><span class="c1"></span>	<span class="nx">chUrls</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>
	<span class="nx">chFinished</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">bool</span><span class="p">)</span> 

	<span class="c1">// Kick off the crawl process (concurrently)
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">url</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">seedUrls</span> <span class="p">{</span>
		<span class="k">go</span> <span class="nf">crawl</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">chUrls</span><span class="p">,</span> <span class="nx">chFinished</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">// Subscribe to both channels
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">c</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">c</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">seedUrls</span><span class="p">)</span><span class="p">;</span> <span class="p">{</span>
		<span class="k">select</span> <span class="p">{</span>
		<span class="k">case</span> <span class="nx">url</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">chUrls</span><span class="p">:</span>
			<span class="nx">foundUrls</span><span class="p">[</span><span class="nx">url</span><span class="p">]</span> <span class="p">=</span> <span class="kc">true</span>
		<span class="k">case</span> <span class="o">&lt;-</span><span class="nx">chFinished</span><span class="p">:</span>
			<span class="nx">c</span><span class="o">++</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="c1">// We&#39;re done! Print the results...
</span><span class="c1"></span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;\nFound&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">foundUrls</span><span class="p">)</span><span class="p">,</span> <span class="s">&#34;unique urls:\n&#34;</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">foundUrls</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34; - &#34;</span> <span class="o">+</span> <span class="nx">url</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nb">close</span><span class="p">(</span><span class="nx">chUrls</span><span class="p">)</span>
<span class="p">}</span>
</pre>
<p>That wraps up the tutorial of a basic Go web scraper! We&rsquo;ve covered making HTTP requests, parsing HTML, and even some complex concurrency patterns.</p>

<p>If you&rsquo;d like to take it a step further, try turning this web scraper into a web <em>crawler</em> and feed the URLs it finds back in as inputs. Then, see how far your crawler gets. 🚀</p>

<p>As always, thanks for reading! :)</p>


  
    <p class="notice notice--info">
      If you enjoyed this tutorial, please consider
      <a href="/blog/donate/a-simple-web-scraper-in-go">sponsoring my work on GitHub</a> 🤗 </p>
  
</article>

<div class="row-spaced">
  <div class="clap-button">
    <button title="Cheers this post" >
      <svg width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
    <path d="M7.216,3.478l-4.395,-1.177c-0.084,-0.023 -0.172,0.007 -0.225,0.076c-0.096,0.125 -2.342,3.082 -1.612,5.235c0.285,0.842 0.985,1.435 2.073,1.773l-1,3.734c-0.359,0.153 -1.306,0.288 -1.863,0.339c-0.103,0.009 -0.184,0.092 -0.193,0.194c-0.009,0.104 0.057,0.198 0.158,0.225l3.574,0.958c0.019,0.005 0.037,0.008 0.056,0.008c0.081,0 0.157,-0.047 0.193,-0.124c0.044,-0.094 0.015,-0.205 -0.07,-0.265c-0.456,-0.322 -1.21,-0.913 -1.443,-1.225l1.002,-3.737c0.33,0.075 0.649,0.122 0.941,0.122l0,0c0.815,0 1.483,-0.289 1.982,-0.86c1.421,-1.622 0.997,-4.956 0.978,-5.097c-0.011,-0.086 -0.073,-0.157 -0.156,-0.179Zm8.59,9.98c-0.557,-0.051 -1.504,-0.186 -1.863,-0.339l-1,-3.734c1.088,-0.338 1.788,-0.931 2.073,-1.773c0.73,-2.153 -1.516,-5.11 -1.612,-5.235c-0.053,-0.068 -0.142,-0.099 -0.225,-0.076l-4.394,1.177c-0.084,0.023 -0.146,0.093 -0.157,0.179c-0.019,0.141 -0.443,3.475 0.977,5.096c0.501,0.572 1.167,0.861 1.983,0.861c0.292,0 0.611,-0.047 0.941,-0.122l1.002,3.737c-0.233,0.312 -0.987,0.903 -1.443,1.225c-0.085,0.06 -0.114,0.171 -0.07,0.265c0.036,0.077 0.112,0.124 0.193,0.124c0.019,0 0.037,-0.003 0.056,-0.008l3.574,-0.958c0.101,-0.027 0.167,-0.121 0.158,-0.225c-0.009,-0.102 -0.09,-0.185 -0.193,-0.194Zm-11.896,-7.94c-1.046,-0.448 -1.956,-0.195 -2.471,0.042c0.352,-1.257 1.152,-2.444 1.414,-2.808l4.112,1.102c0.021,0.212 0.054,0.648 0.049,1.181c-1.066,0.727 -2.137,0.896 -3.104,0.483Zm8.181,0c-0.968,0.413 -2.039,0.243 -3.105,-0.482c-0.004,-0.534 0.029,-0.97 0.05,-1.182l4.112,-1.103c0.261,0.365 1.06,1.551 1.413,2.808c-0.515,-0.236 -1.424,-0.489 -2.47,-0.041Zm1.65,-0.642c0.027,0 0.055,-0.005 0.081,-0.016c0.109,-0.044 0.162,-0.169 0.117,-0.279c-0.22,-0.54 -0.751,-1.446 -0.773,-1.484c-0.06,-0.102 -0.191,-0.136 -0.293,-0.076c-0.102,0.059 -0.136,0.19 -0.076,0.292c0.005,0.009 0.538,0.918 0.746,1.43c0.034,0.082 0.114,0.133 0.198,0.133Zm-10.614,-1.855c-0.102,-0.06 -0.233,-0.026 -0.293,0.076c-0.022,0.038 -0.553,0.944 -0.773,1.484c-0.045,0.11 0.008,0.235 0.117,0.279c0.027,0.011 0.054,0.016 0.081,0.016c0.084,0 0.164,-0.051 0.198,-0.134c0.207,-0.511 0.74,-1.42 0.745,-1.429c0.061,-0.101 0.027,-0.233 -0.075,-0.292Zm4.873,-1.864c-0.118,0 -0.214,0.097 -0.214,0.214l0,1.136c0,0.118 0.096,0.214 0.214,0.214c0.118,0 0.214,-0.096 0.214,-0.214l0,-1.136c0,-0.117 -0.096,-0.214 -0.214,-0.214Zm-1.136,1.34c0.04,0.034 0.09,0.05 0.138,0.05c0.061,0 0.121,-0.025 0.164,-0.075c0.076,-0.09 0.065,-0.225 -0.025,-0.301l-0.928,-0.785c-0.09,-0.076 -0.224,-0.064 -0.301,0.025c-0.076,0.091 -0.064,0.225 0.026,0.302l0.926,0.784Zm2.134,0.05c0.049,0 0.098,-0.016 0.138,-0.05l0.927,-0.784c0.09,-0.077 0.101,-0.211 0.025,-0.302c-0.076,-0.089 -0.211,-0.1 -0.301,-0.025l-0.927,0.785c-0.09,0.076 -0.101,0.211 -0.025,0.301c0.042,0.05 0.102,0.075 0.163,0.075Z"/>
</svg>

    </button>
    <div title="51 readers">
      <span class="clap-count">
        466
      </span>
      cheers
    </div>
  </div>
  <div class="tags">
  
    
      <a href="/blog/tags/tutorial" class="tag">
        tutorial
      </a>
    
  
    
      <a href="/blog/tags/go" class="tag">
        go
      </a>
    
  
</div>

</div>

  <div class="vote-messages">
    <div data-votes="50" data-effect="page-flip">
      <div class="notice notice--danger">
        Now look what you've done 🌋
      </div>
    </div>
    <div data-votes="42" data-effect="page-shake">
      <div class="notice notice--danger notice--huge">
        Stop clicking and run for your life! 😱
      </div>
    </div>
    <div data-votes="35" data-effect="shake">
      <div class="notice notice--warning notice--big">
        Uh oh, I don't think the system can't handle it! 🔥
      </div>
    </div>
    <div data-votes="20">
      <div class="notice notice--warning">
        Stop it, you're too kind 😄
      </div>
    </div>
    <div data-votes="4">
      <div class="notice notice--notice">
        Thanks for the love! ❤️
      </div>
    </div>
    <div data-votes="1">
      <div class="notice">
        Thanks, glad you enjoyed it! Care to share?
        <div class="blog-post__btns">
          <a
            data-href="/blog/share/a-simple-web-scraper-in-go/hn"
            target="_blank"
            rel="nofollow"
            class="btn btn--xs svg-icon btn--hn"
          >
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path fill="currentColor"
          d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM21.2 229.2H21c.1-.1.2-.3.3-.4 0 .1 0 .3-.1.4zm218 53.9V384h-31.4V281.3L128 128h37.3c52.5 98.3 49.2 101.2 59.3 125.6 12.3-27 5.8-24.4 60.6-125.6H320l-80.8 155.1z"></path>
</svg>
 Hacker News
          </a>
          <a
            data-href="/blog/share/a-simple-web-scraper-in-go/twitter"
            target="_blank"
            rel="nofollow"
            class="btn btn--xs svg-icon btn--twitter"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor"
          d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
</svg>
 Twitter
          </a>
          <a
            data-href="/blog/share/a-simple-web-scraper-in-go/reddit"
            target="_blank"
            rel="nofollow"
            class="btn btn--xs svg-icon btn--reddit"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor"
          d="M440.3 203.5c-15 0-28.2 6.2-37.9 15.9-35.7-24.7-83.8-40.6-137.1-42.3L293 52.3l88.2 19.8c0 21.6 17.6 39.2 39.2 39.2 22 0 39.7-18.1 39.7-39.7s-17.6-39.7-39.7-39.7c-15.4 0-28.7 9.3-35.3 22l-97.4-21.6c-4.9-1.3-9.7 2.2-11 7.1L246.3 177c-52.9 2.2-100.5 18.1-136.3 42.8-9.7-10.1-23.4-16.3-38.4-16.3-55.6 0-73.8 74.6-22.9 100.1-1.8 7.9-2.6 16.3-2.6 24.7 0 83.8 94.4 151.7 210.3 151.7 116.4 0 210.8-67.9 210.8-151.7 0-8.4-.9-17.2-3.1-25.1 49.9-25.6 31.5-99.7-23.8-99.7zM129.4 308.9c0-22 17.6-39.7 39.7-39.7 21.6 0 39.2 17.6 39.2 39.7 0 21.6-17.6 39.2-39.2 39.2-22 .1-39.7-17.6-39.7-39.2zm214.3 93.5c-36.4 36.4-139.1 36.4-175.5 0-4-3.5-4-9.7 0-13.7 3.5-3.5 9.7-3.5 13.2 0 27.8 28.5 120 29 149 0 3.5-3.5 9.7-3.5 13.2 0 4.1 4 4.1 10.2.1 13.7zm-.8-54.2c-21.6 0-39.2-17.6-39.2-39.2 0-22 17.6-39.7 39.2-39.7 22 0 39.7 17.6 39.7 39.7-.1 21.5-17.7 39.2-39.7 39.2z"></path>
</svg>
 Reddit
          </a>
          <a
            data-href="/blog/share/a-simple-web-scraper-in-go/email"
            target="_blank"
            rel="nofollow"
            class="btn btn--xs svg-icon btn--email"
          >
            <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor"
          d="M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z"></path>
</svg>
 Email
          </a>
          <script>
            // Populate href dynamically so bots don't crawl so easily
            for (const el of document.querySelectorAll('[data-href]')) {
              el.setAttribute('href', el.getAttribute('data-href'));
            }
          </script>
        </div>
      </div>
    </div>
  </div>


<hr class="hr--spaced"/>
<div>
  <div class="row-spaced">
    <h2 class="row-spaced">More Posts ✍🏻</h2>
    <small><a href="/blog" title="See all blog posts">See All &raquo;</a></small>
  </div>
  <div class="cards cards--flexy">
  
    <div class="card card--clicky" onclick="window.location='/blog/going-indie-again'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2020-08-31 17:08:48.839 +0000 +0000" title="2020-08-31 17:08:48.839 +0000 +0000">
    Aug 31, 2020
  </time>
  <span title="352 words">
    &bull; 2 min read
  </span>
  
  
    <span title="132 readers voted">
      &bull; 2643 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">👨🏼‍💻 Going Indie, Again</div>
        <a href="/blog/going-indie-again">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/2019-review'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2020-01-02 00:55:36 +0000 +0000" title="2020-01-02 00:55:36 +0000 +0000">
    Jan  2, 2020
  </time>
  <span title="343 words">
    &bull; 2 min read
  </span>
  
  
    <span title="47 readers voted">
      &bull; 998 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">🗓 2019 Year in Review: Prioritizing Health</div>
        <a href="/blog/2019-review">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/2020-review'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2021-01-02 06:33:09.502 +0000 +0000" title="2021-01-02 06:33:09.502 +0000 +0000">
    Jan  2, 2021
  </time>
  <span title="730 words">
    &bull; 4 min read
  </span>
  
  
    <span title="69 readers voted">
      &bull; 1139 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">🗓 2020 Year in Review: Life Shuffle</div>
        <a href="/blog/2020-review">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/productive-procrastination'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2020-01-14 16:20:42 +0000 +0000" title="2020-01-14 16:20:42 +0000 +0000">
    Jan 14, 2020
  </time>
  <span title="675 words">
    &bull; 4 min read
  </span>
  
  
    <span title="133 readers voted">
      &bull; 4560 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">😈 Productive Procrastination</div>
        <a href="/blog/productive-procrastination">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/wait-for-user-to-stop-typing-using-javascript'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2014-12-08 00:00:00 +0000 +0000" title="2014-12-08 00:00:00 +0000 +0000">
    Dec  8, 2014
  </time>
  <span title="653 words">
    &bull; 4 min read
  </span>
  
  
    <span title="193 readers voted">
      &bull; 2796 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">💻 Wait for User to Stop Typing, in JavaScript</div>
        <a href="/blog/wait-for-user-to-stop-typing-using-javascript">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/abandoning-the-static-site'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2019-12-23 16:19:47 +0000 +0000" title="2019-12-23 16:19:47 +0000 +0000">
    Dec 23, 2019
  </time>
  <span title="1130 words">
    &bull; 6 min read
  </span>
  
  
    <span title="73 readers voted">
      &bull; 1050 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">🎈 Abandoning the Static Site</div>
        <a href="/blog/abandoning-the-static-site">Read Post &raquo;</a>
      </div>
    </div>
  
    <div class="card card--clicky" onclick="window.location='/blog/quitting-with-positivity'">
      <div class="card__inner">
        <div class="meta card__title">
  <time datetime="2020-02-03 19:35:17 +0000 +0000" title="2020-02-03 19:35:17 +0000 +0000">
    Feb  3, 2020
  </time>
  <span title="1050 words">
    &bull; 6 min read
  </span>
  
  
    <span title="66 readers voted">
      &bull; 431 votes
      
    </span>
  
  
  
  
</div>

        <div class="card__body">👔 Quit With Positivity</div>
        <a href="/blog/quitting-with-positivity">Read Post &raquo;</a>
      </div>
    </div>
  
</div>

</div>

<div class="subscription-form-wrapper">
  <div class="subscription-form__inner">
    <a class="subscription-form__hide" href="#" title="Hide subscription form">
      &times;
    </a>
    <script>
      (function () {
        const el = document.querySelector('.subscription-form');
        const btn = document.querySelector('.subscription-form__hide');

        function h() {
          const time = parseInt(localStorage.schierSubHide);

          // Re-show every two weeks
          if (!isNaN(time) && (Date.now() - time) < 1209600000) {
            el.style.display = 'none';
          }
        }

        btn.addEventListener('click', function (e) {
          e.preventDefault();
          localStorage.schierSubHide = Date.now();
          h();
        });

        h();
      })();
    </script>
    <label for="subscription-email">
      <p>
        Updates on <strong>indie dev, productivity, and software</strong> 💌
      </p>
    </label>

    <form action="/forms/newsletter/subscribe" method="post" class="subscription-form">
  <input type="hidden" name="gorilla.csrf.Token" value="AlKNcVn02u5dtTyBTU8IelxkBWSl9RYxNbpPAkKD5lDLF4jYLQkLOt31wqnD9RX+2aB1cpBXN1H4KZKBEfP/Mw==">
  <div class="button-input">
    <input id="subscription-email" name="email" type="email" placeholder="me@example.com">
    
    <input id="subscription-username" name="username" type="text" placeholder="username">
    <button class="btn">
      Subscribe
    </button>
  </div>
</form>

  </div>
</div>



  <script> 
  (function () {
    const msgContainer = document.body.querySelector('.vote-messages');
    if (!msgContainer) {
      return;
    }

    const msgs = msgContainer.querySelectorAll('[data-votes]');
    const container = document.body.querySelector('.clap-button');
    const clapCount = container.querySelector('.clap-count');
    const clapBtn = container.querySelector('button');
    const localStorageKey = "vote-a-simple-web-scraper-in-go";

    function updateDisabledAttr() {
      const count = JSON.parse(localStorage.getItem(localStorageKey)) || 0;
      if (count >= 50) {
        clapBtn.setAttribute('disabled', 'disabled');
      }
    }

    updateDisabledAttr();

    // Remove sheers notifications so we can show them later
    for (const el of msgs) {
      msgContainer.removeChild(el);
    }

    clapBtn.addEventListener('click', async function (e) {
      e.preventDefault();
      e.stopPropagation();

      let count = parseInt(localStorage.getItem(localStorageKey)) || 0;
      count = isNaN(count) ? 0 : count;

      const resp = await fetch('/api/blog/vote', {
        method: 'POST',
        body: `slug=a-simple-web-scraper-in-go&count=${count}`,
        headers: {
          [document.body.getAttribute(
            'data-csrf-token-header',
          )]: document.body.getAttribute('data-csrf-token'),
          'Content-Type': 'application/x-www-form-urlencoded',
        },
      });
      const total = await resp.text();
      localStorage.setItem(localStorageKey, JSON.stringify(count + 1));
      updateDisabledAttr();

      clapCount.innerHTML = total;
      for (const el of msgs) {
        if (count + 1 < parseInt(el.getAttribute('data-votes'))) {
          continue;
        }

        // Append child if it's not already
        if (!el.parentNode) {
          msgContainer.prepend(el);
        } else {
          // Already there, so no need to do the rest
          continue;
        }

        el.style.animation = 'fade-in 0.5s';

        if (el.getAttribute('data-effect') === 'shake') {
          container.style.animation = 'shake 0.5s';
          container.style.animationIterationCount = 'infinite';
        }

        if (el.getAttribute('data-effect') === 'page-shake') {
          document.body.style.animation = 'shake 0.6s';
          document.body.style.animationIterationCount = 'infinite';
          container.style.animation = '';
        }

        if (el.getAttribute('data-effect') === 'page-flip') {
          document.body.style.animation = 'flip 0.3s';
          document.body.style.animationFillMode = 'forwards';
          container.style.animation = '';
        }
      }
    });
  })();
  </script>

  <script> 
  (function () {
    document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]').forEach(el => {
      const a = document.createElement('a');
      a.href = '#' + el.id;
      a.classList.add('h-link');
      a.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor"
          d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path>
</svg>
`;
      el.classList.add('header');
      el.prepend(a);
    });
  })();
  </script>


  </div>

  </main>
  <footer class="bottom-footer">
  <div class="container content">
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 748 748">
    <clipPath id="A">
        <circle cx="374" cy="374" r="374"/>
    </clipPath>
    <g clip-path="url(#A)">
        <path d="M-.603 373.897h748.356v374.5H-.603z" fill="#524b46"/>
        <path d="M-.603 427.853L149.45 410.62l340.367 24.513 167.434-34h90.503V126.837H-.603v301.016z"
              fill="#625a54"/>
        <path d="M-.603-.603V210.7H116.68l112.302-29.746 279.933-10.64 141.6 10.64 97.23-31.642V-.603H-.603z"
              fill="#746b64"/>
        <path d="M250.906 561.984l218.712-78.662s9.937.987 14.67 2.466c5.627 1.758 19.095 8.083 19.095 8.083l-19.095 115.48-99.83 100.453-115.43-77.16-18.122-70.66z"
              fill="#423f3d"/>
        <path d="M265.81 433.212s-62.025 78.665 20.455 152.545c24.158 21.64 75.707 49.576 92.467 49.46 31.476-.217 69.45-32.395 69.45-32.395s35.694-81.308 35.694-90.945c0-15.396-21.156-29.682-22.056-34.547-2.123-11.487-.7-60.254-.7-60.254l-195.31 16.136z"
              fill="#d2b4aa"/>
        <path d="M448.028 617.132l.018-21.17s36.36-97.123 50.33-106.205c5.06-3.3 13.406-5.865 15.284-9.697s.52-12.384-4.017-13.298c-9.874-2-48.704 0-48.704 0l-3.272-43.652 42.507 14.5 69.445 19.132-21.724 42.097s93.13 27.307 141.642 74.586c9.63 9.384 58.218 174.98 58.218 174.98H-.603s48.82-162.398 58.31-168.974c10.195-7.062 105.116-60.16 143.625-62.632 0 0 40.232-83.587 60.945-73.033 17.8 9.07-36.34 82.38 21.8 159.307l112.58 86.995 51.37-72.936z"
              fill="#4992ea"/>
        <path d="M417.772 748.397h-57.736s3.817-32.114 10.894-46.3c7.05-15.896 61.8-72.364 75.16-87.02 17.052-20.643 43.2-55.592 60.313-78.84 14.63-19.864 34.5-48.127 42.43-60.646 2.74-4.324 7.035-10.068 5.157-14.468s-10.47-10.455-16.423-11.93-13.048 4.925-19.297 3.085c-7.958-2.344-28.454-17.147-28.454-17.147 8.376-17.07 116.872-7.966 93.865 43.78-.748 6.268-9.817 10.48-8.88 16.722 1.118 7.45 17.54 13.443 15.584 27.978-1.112 8.27-41.726 35.133-49.6 42.887-9.5 9.358-52.943 54.937-60.808 64.234-6.85 8.096-42.807 52.612-50.145 67.873-7.328 15.245-12.07 49.793-12.07 49.793zm-151.375-306.36s-32.975 28.577-42.56 40.462c-7.172 8.893-13.28 21.348-14.948 30.848-12.65 29.14 78.875 98.73 115.266 120.642 12.705 7.65 29.9 17.4 37.712 24.096 4.683 4.015 9.16 16.087 9.16 16.087-.678 9.77-14.737 21.02-23.124 23.47-10.647 3.113-27.505 7.416-39.806 2.375-14.673-6.014-32.977-25.55-48.232-38.456-10.363-5.634-27.81-22.406-43.527-40.15-85.708-72.79-34.292-173.967 49.303-190.76l.755 11.382.001.003z"
              fill="#98c5ff"/>
        <path d="M302.343 654.642c-3.368-1.174-5.788-4.382-5.788-8.152 0-4.762 3.863-8.63 8.62-8.63s8.622 3.867 8.622 8.63c.003 1.813-.568 3.58-1.63 5.05 7.087 26.966 4.783 63.317 5.3 96.86h-10.282c.46-2.056 4.16-81.32-4.83-93.754v-.002zm144.07-6.896c-1.8-1.582-2.92-3.896-2.92-6.472 0-4.762 3.863-8.63 8.62-8.63s8.622 3.867 8.622 8.63a8.63 8.63 0 0 1-4.06 7.323c-4.562 24.24-6.477 99.8-6.477 99.8l-10.28-.864c1.483-48.83 3.745-73.606 6.498-99.788l-.003.001z"
              fill="#423f3d"/>
        <path d="M376.1 76.938c-112.268-6.826-152.306 155.097-158.044 179.405-5.26 22.272-4.057 60.616 0 75.96 6.71 25.38 20.026 27.553 23.36 34.72 3.87 8.325 2.478 22.828 5.376 34.338 4.167 14.8 15.955 35.693 25.756 52.562 10.42 17.933 19.5 44.295 36.767 55.04s46.107 17.594 66.786 9.427c53.872-21.277 99.2-117.03 103.57-141.673 1.722-9.713 17.928-12.693 23.1-21.73s5.3-21.674 7.977-32.5c3.267-13.17 14.967-30.9 11.624-46.522-4.914-22.974-42.71-192.73-146.28-199.027z"
              fill="#e9ccc2"/>
        <path d="M233.655 268.66c-5.3-6.272-14.51-12.236-17.82-22.862-3.702-11.89-2.56-32.067-1.982-48.106.595-16.524 3.312-76.306 13.552-92.64C246.76 75.388 300.74 50.656 358.02 43.256c20.19-2.608 72.903 2.094 114.108 46.915 37.55 51.23 48.915 142.353 45.587 155.226-2.268 8.772-17.93 34.862-24.78 35.67-8.184-69.482-27.38-113.974-37.635-128.045-44.146-14.498-98.26 23.9-137.76 31.214-23.596 7.196-59.4 7.37-72.374 15.442-2.214 6.32-3.292 78.723-11.5 68.983z"
              fill="#fff8d4"/>
    </g>
</svg>


      <div class="links">
        <a href="//twitter.com/GregorySchier" rel="noopener">
          Twitter
        </a>
        |
        <a href="//github.com/gschier" rel="noopener">
          GitHub
        </a>
        |
        <a href="/newsletter">Newsletter</a>
        <p>
          
            &copy; Greg Schier
          
        </p>
      </div>
    </div>
  </div>
</footer>




  <script>parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"BcDR":[function(require,module,exports) {

},{}],"jD6M":[function(require,module,exports) {

},{"./theme-light.css":"BcDR","./theme-dark.css":"BcDR","./card.css":"BcDR","./content.css":"BcDR","./footer.css":"BcDR","./notice.css":"BcDR","./subscription-form.css":"BcDR","./syntax.css":"BcDR","./button.css":"BcDR","./nav.css":"BcDR"}],"LVMl":[function(require,module,exports) {
"use strict";require("./styles/styles.css");const e=document.querySelector("html");function t(){const t=e.getAttribute("theme")||"light-auto";document.querySelectorAll("[data-toggle-theme]").forEach(e=>{const l=e.querySelector('[data-theme="auto"]'),o=e.querySelector('[data-theme="light"]'),a=e.querySelector('[data-theme="dark"]');l.style.display=t.includes("-auto")?"inline-block":"none",o.style.display="light"===t?"inline-block":"none",a.style.display="dark"===t?"inline-block":"none",console.log("Using theme",t)})}document.querySelectorAll("[data-toggle-theme]").forEach(l=>{l.addEventListener("click",l=>{l.preventDefault();let o=e.getAttribute("theme")||"auto",a=l.metaKey||l.ctrlKey?"":o.includes("dark")?"light":"dark";localStorage.setItem("theme",a),e.setAttribute("theme",a),t()})}),t();
},{"./styles/styles.css":"jD6M"}]},{},["LVMl"], null) </script>


</body>
</html>
